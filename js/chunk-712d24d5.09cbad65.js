(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-712d24d5"],{"67e3":function(t,e,c){"use strict";c.r(e);var l=c("7a23"),n={class:"container text-center mb-9"},a=Object(l["h"])("h2",{class:"subtitle text-white border-0"},"訂單頁面",-1),d={class:"dashboardTable"},o=Object(l["h"])("thead",null,[Object(l["h"])("tr",null,[Object(l["h"])("th",null,"購買時間"),Object(l["h"])("th",null,"Email"),Object(l["h"])("th",null,"購買款項"),Object(l["h"])("th",null,"應付金額"),Object(l["h"])("th",null,"是否付款"),Object(l["h"])("th",null,"編輯")])],-1),r={key:0,class:"noData"},s=Object(l["h"])("td",{colspan:"6"},"未有訂單",-1),b={class:"list-unstyled"},i={class:"text-right"},u={class:"switch-group"},h=Object(l["h"])("div",{class:"switch-circle"},null,-1),O={key:0},j={key:1},p={class:"btn-group"};function f(t,e,c,f,v,m){var D=Object(l["A"])("OrderModal"),g=Object(l["A"])("DeleteModal"),y=Object(l["A"])("Pagination");return Object(l["v"])(),Object(l["d"])(l["a"],null,[Object(l["h"])(D,{ref:"orderModal",order:v.tempOrder,onRenderProducts:m.getOrders},null,8,["order","onRenderProducts"]),Object(l["h"])(g,{ref:"deleteModal",status:v.deleteModalStatus,data:v.tempOrder,onRenderProducts:m.getOrders},null,8,["status","data","onRenderProducts"]),Object(l["h"])("div",n,[a,Object(l["h"])("table",d,[o,Object(l["h"])("tbody",null,[0===v.orders.length?(Object(l["v"])(),Object(l["d"])("tr",r,[s])):(Object(l["v"])(!0),Object(l["d"])(l["a"],{key:1},Object(l["z"])(v.orders,(function(t){return Object(l["v"])(),Object(l["d"])("tr",{key:t.id},[Object(l["h"])("td",null,Object(l["D"])(t.create_at),1),Object(l["h"])("td",null,[Object(l["h"])("span",null,Object(l["D"])(t.user.email),1)]),Object(l["h"])("td",null,[Object(l["h"])("ul",b,[(Object(l["v"])(!0),Object(l["d"])(l["a"],null,Object(l["z"])(t.products,(function(t){return Object(l["v"])(),Object(l["d"])("li",{key:t.id},Object(l["D"])(t.product.title)+" 數量："+Object(l["D"])(t.qty)+" "+Object(l["D"])(t.product.unit),1)})),128))])]),Object(l["h"])("td",i,Object(l["D"])(t.total),1),Object(l["h"])("td",null,[Object(l["h"])("div",u,[Object(l["h"])("div",{class:["switch",{open:t.is_paid}]},[h],2)]),Object(l["h"])("label",null,[t.is_paid?(Object(l["v"])(),Object(l["d"])("span",O,"已付款")):(Object(l["v"])(),Object(l["d"])("span",j,"未付款"))])]),Object(l["h"])("td",null,[Object(l["h"])("div",p,[Object(l["h"])("button",{class:"btn btn-outline-secondary btn-sm",onClick:function(e){return m.openOrderModal(t)}}," 檢視 ",8,["onClick"]),Object(l["h"])("button",{class:"btn btn-outline-danger btn-sm",onClick:function(e){return m.openDeleteModal("order",t)}}," 刪除 ",8,["onClick"])])])])})),128))])]),Object(l["h"])(y,{pages:v.pagination,onGoPage:m.getOrders},null,8,["pages","onGoPage"])])],64)}var v=c("5530"),m=(c("99af"),c("b0c0"),{ref:"orderModal",class:"modal fade",tabindex:"-1"}),D={class:"modal-dialog modal-xl"},g={class:"modal-content"},y=Object(l["h"])("div",{class:"modal-header bg-dark"},[Object(l["h"])("h5",{class:"modal-title text-white fw-bolder"},"訂單資料"),Object(l["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),k={class:"modal-body"},w={class:"row"},x={class:"col-md-4"},M=Object(l["h"])("h3",null,"用戶資料",-1),_={class:"table"},S=Object(l["h"])("th",{style:{width:"100px"}},"姓名",-1),$=Object(l["h"])("th",null,"Email",-1),C=Object(l["h"])("th",null,"電話",-1),P=Object(l["h"])("th",null,"地址",-1),I={class:"col-md-8"},R=Object(l["h"])("h3",null,"訂單細節",-1),T={class:"table"},z=Object(l["h"])("th",{style:{width:"100px"}},"訂單編號",-1),A=Object(l["h"])("th",null,"下單時間",-1),G=Object(l["h"])("th",null,"付款時間",-1),J={key:0,class:"text-success"},q={key:1,class:"text-muted"},E=Object(l["h"])("th",null,"付款狀態",-1),U={key:0,class:"text-success"},F={key:1,class:"text-muted"},L=Object(l["h"])("th",null,"總金額",-1),V=Object(l["h"])("h3",{class:"text-dark"},"選購商品",-1),B={class:"table"},H=Object(l["h"])("thead",null,[Object(l["h"])("tr")],-1),K={class:"text-end"},N={class:"d-flex justify-content-end"},Q={class:"form-check"},W={class:"form-check-label",for:"flexCheckDefault"},X={key:0,class:"text-success"},Y={key:1,class:"text-muted"},Z={class:"modal-footer"},tt=Object(l["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function et(t,e,c,n,a,d){var o,r,s,b,i,u,h,O;return Object(l["v"])(),Object(l["d"])("div",m,[Object(l["h"])("div",D,[Object(l["h"])("div",g,[y,Object(l["h"])("div",k,[Object(l["h"])("div",w,[Object(l["h"])("div",x,[M,Object(l["h"])("table",_,[Object(l["h"])("tbody",null,[Object(l["h"])("tr",null,[S,Object(l["h"])("td",null,Object(l["D"])(null===(o=a.orderDetail)||void 0===o||null===(r=o.user)||void 0===r?void 0:r.name),1)]),Object(l["h"])("tr",null,[$,Object(l["h"])("td",null,Object(l["D"])(null===(s=a.orderDetail)||void 0===s||null===(b=s.user)||void 0===b?void 0:b.email),1)]),Object(l["h"])("tr",null,[C,Object(l["h"])("td",null,Object(l["D"])(null===(i=a.orderDetail)||void 0===i||null===(u=i.user)||void 0===u?void 0:u.tel),1)]),Object(l["h"])("tr",null,[P,Object(l["h"])("td",null,Object(l["D"])(null===(h=a.orderDetail)||void 0===h||null===(O=h.user)||void 0===O?void 0:O.address),1)])])])]),Object(l["h"])("div",I,[R,Object(l["h"])("table",T,[Object(l["h"])("tbody",null,[Object(l["h"])("tr",null,[z,Object(l["h"])("td",null,Object(l["D"])(a.orderDetail.id),1)]),Object(l["h"])("tr",null,[A,Object(l["h"])("td",null,Object(l["D"])(a.orderDetail.create_at),1)]),Object(l["h"])("tr",null,[G,Object(l["h"])("td",null,[a.orderDetail.is_paid?(Object(l["v"])(),Object(l["d"])("span",J,Object(l["D"])(a.orderDetail.paid_date),1)):(Object(l["v"])(),Object(l["d"])("span",q,"尚未付款"))])]),Object(l["h"])("tr",null,[E,Object(l["h"])("td",null,[a.orderDetail.is_paid?(Object(l["v"])(),Object(l["d"])("strong",U,"已付款")):(Object(l["v"])(),Object(l["d"])("span",F,"尚未付款"))])]),Object(l["h"])("tr",null,[L,Object(l["h"])("td",null,Object(l["D"])(a.orderDetail.total),1)])])]),V,Object(l["h"])("table",B,[H,Object(l["h"])("tbody",null,[(Object(l["v"])(!0),Object(l["d"])(l["a"],null,Object(l["z"])(a.orderDetail.products,(function(t){return Object(l["v"])(),Object(l["d"])("tr",{key:t.id},[Object(l["h"])("th",null,Object(l["D"])(t.product.title),1),Object(l["h"])("td",null,Object(l["D"])(t.qty)+" / "+Object(l["D"])(t.product.unit),1),Object(l["h"])("td",K,Object(l["D"])(t.final_total),1)])})),128))])]),Object(l["h"])("div",N,[Object(l["h"])("div",Q,[Object(l["L"])(Object(l["h"])("input",{class:"form-check-input",type:"checkbox",id:"flexCheckDefault","onUpdate:modelValue":e[1]||(e[1]=function(t){return a.orderDetail.is_paid=t})},null,512),[[l["G"],a.orderDetail.is_paid]]),Object(l["h"])("label",W,[a.orderDetail.is_paid?(Object(l["v"])(),Object(l["d"])("span",X,"已付款")):(Object(l["v"])(),Object(l["d"])("span",Y,"未付款"))])])])])])]),Object(l["h"])("div",Z,[tt,Object(l["h"])("button",{type:"button",class:"btn btn-secondary",onClick:e[2]||(e[2]=function(t){return d.updataOrder(a.orderDetail.id)})}," 修改付款狀態 ")])])])],512)}var ct=c("7c2b"),lt=c.n(ct),nt={props:{order:{type:Object,default:function(){return{}}}},data:function(){return{modal:"",orderDetail:{}}},watch:{order:function(){this.orderDetail=this.order,console.log(this.orderDetail)}},methods:{openModal:function(){this.modal.show()},closeModal:function(){this.modal.hide()},updataOrder:function(t){var e=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiang666","/admin/order/").concat(t);this.$http.put(c,{data:this.orderDetail}).then((function(t){t.data.success?(e.$swal.fire({icon:"success",title:t.data.message}),e.closeModal(),e.$emit("renderProducts")):e.$swal.fire({icon:"error",title:t.data.message})})).catch((function(t){console.log(t)}))},timeISO:function(t){return new Date(1e3*t).toISOString().substr(0,10)}},mounted:function(){this.modal=new lt.a(this.$refs.orderModal)}};nt.render=et;var at=nt,dt=c("ab21"),ot=c("1799"),rt={components:{OrderModal:at,DeleteModal:dt["a"],Pagination:ot["a"]},data:function(){return{orders:[],tempOrder:{},pagination:{},deleteModalStatus:""}},methods:{getOrders:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiang666","/admin/orders?page=").concat(e);this.$http.get(c).then((function(e){e.data.success?(t.orders=e.data.orders,t.pagination=e.data.pagination):(t.$swal("資料讀取失敗，請重新登入"),t.$router.push("/login"),document.cookie="roseToken=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;")})).catch((function(t){console.log(t)}))},openOrderModal:function(t){this.tempOrder=Object(v["a"])({},t),this.$refs.orderModal.openModal()},openDeleteModal:function(t,e){this.deleteModalStatus=t,this.tempOrder=Object(v["a"])({},e),this.$refs.deleteModal.openModal()},timeISO:function(t){return new Date(1e3*t).toISOString().substr(0,10)}},mounted:function(){this.getOrders()}};rt.render=f;e["default"]=rt},b0c0:function(t,e,c){var l=c("83ab"),n=c("9bf2").f,a=Function.prototype,d=a.toString,o=/^\s*function ([^ (]*)/,r="name";l&&!(r in a)&&n(a,r,{configurable:!0,get:function(){try{return d.call(this).match(o)[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-712d24d5.09cbad65.js.map